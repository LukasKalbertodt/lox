# We define two jobs:
# - "Check Style": it only runs a simple style checker script
# - "Compile & Test": this actually needs Rust and compiles everything
matrix:
  fast_finish: true
  include:
    - name: "Check style"
      language: generic
      script: ./ci/check-basic-style.sh
    - name: "Compile & Test"
      language: rust
      rust: nightly
      env:
        - RUSTFLAGS="--deny warnings"
      script:
        - cargo build --all --verbose || travis_terminate 1
        - cargo test --all --verbose || travis_terminate 1
        - cargo doc --no-deps --verbose || travis_terminate 1
      # speeds up travis build
      cache: cargo
